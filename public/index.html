<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme="dark"
  
    class="html theme--dark"
  
><head>
  <title>
    
      
        Personal Website |
      Joe Harrison

  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.113.0"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Joe Harrison" />
  <meta
    name="description"
    content="Data Scientist"
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.26d8396ded3f4aa47cc8d77a9fcb09fee1d20d223c6b3f074a21c7e217bc8c6d.css"
      integrity="sha256-Jtg5be0/SqR8yNd6n8sJ/uHSDSI8az8HSiHH4he8jG0="
      crossorigin="anonymous"
      type="text/css"
    />
  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css"
    integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css"
    integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css"
    integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css"
    integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css"
    integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="https://example.com/" />

  
  <link rel="alternate" type="application/rss+xml" href="/index.xml" title="My blog" />
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js"
      integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc="
      crossorigin="anonymous"
    ></script>
  

  


  
  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://example.com/images/site-feature-image.png"/>

<meta name="twitter:title" content="Personal Website"/>
<meta name="twitter:description" content="Data Scientist"/>



  
  <meta property="og:title" content="Personal Website" />
<meta property="og:description" content="Data Scientist" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://example.com/" /><meta property="og:image" content="https://example.com/images/site-feature-image.png"/><meta property="og:site_name" content="Joe Harrison" />




  
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": "My blog",
      "url": "https:\/\/example.com",
      "description": "Data Scientist",
      "thumbnailUrl": "https:\/\/example.com",
      "license": ""
    }
  </script>


</head>
<body class="body">
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"
        
      ><div
  class="sidebar
    animated fadeInDown
  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/tux.png"
        alt="profile picture"
      />
      
        <h1 class="sidebar__introduction-title">
          <a href="/">Joe Harrison</a>
        </h1>
      
      <div class="sidebar__introduction-description">
        <p>Data Scientist</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://github.com/mkw-TL"
            target="_blank"
            rel="noopener me"
            aria-label="GitHub"
            title="GitHub"
          >
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="mailto:joe.harrison.va@gmail.com"
            target="_blank"
            rel="noopener me"
            aria-label="e-mail"
            title="e-mail"
          >
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Joe Harrison
        2023
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha384-t5CR&#43;zwDAROtph0PXGte6ia8heboACF9R5l/DiY&#43;WZ3P2lxNgvJkQk5n7GPvLMYw" crossorigin="anonymous" /><script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8&#43;w2LAIftJEULZABrF9PPFv&#43;tVkH" crossorigin="anonymous"></script><script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js"
      integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB&#43;w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"
    ></script></div>
</aside>
      <main
        
          class="wrapper__main"
        
      >
        <header class="header"><div
  class="
    animated fadeInDown
  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            
            <a
              
                class="nav__link--active"
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/post/"
              
              title=""
              >Posts</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/portfolio/"
              
              title=""
              >Portfolio</a
            >
          </li>
        

      
        
        

          <li class="nav__list-item">
            <div class="optionswitch">
              <input class="optionswitch__picker" type="checkbox" id="3" hidden />

              
              
                

              
                

              


              <label class="optionswitch__label" for="3"
                >Accomplishments <i class="fa fa-angle-down" aria-hidden="true"></i
              ></label>

              <div class="optionswitch__triangle"></div>
              <ul class="optionswitch__list">
                
                  <li class="optionswitch__list-item">
                    
                    <a
                      href="/awards/"
                      
                      title=""
                      >Awards</a
                    >
                  </li>
                
                  <li class="optionswitch__list-item">
                    
                    <a
                      href="/certifications/"
                      
                      title=""
                      >Certifications</a
                    >
                  </li>
                
              </ul>
            </div>
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/about/"
              
              title=""
              >About</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/contact/"
              
              title=""
              >Contact</a
            >
          </li>
        

      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>
      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown
    "
  >
    <div class="post__content">
      <p>Hello! Welcome to my website.</p>
<p>I am a Senior at Virginia Tech majoring in Computational Modeling and Data Analytics (CMDA) &amp; Statistics. I have published 3 papers, through my research on Privacy and Linguistics, and am currently curious about the current intelligence gathering systems, most notably the Large Language Model paradigm.</p>
<p>Below is a forthcoming analysis of chess <a href="https://database.lichess.org/">data</a> from Lichess, over the month of April, 2023.</p>
<h3 id="why-should-you-care">Why should you care?</h3>
<p><font size="4"> <em>Because it&rsquo;s awesome!</em>. </font> Also look look look at the pretty movie I made:</p>

<figure >
  
    <img src="https://imgur.com/fUrDeEO.gif"  />
    
    
</figure>

<p>Alright with the introduction out of the way let&rsquo;s get into this.</p>
<h3 id="challenge-1">Challenge 1</h3>
<ul>
<li>People play a lot of chess</li>
</ul>
<p><strong>104 million games were played</strong>, with a compressed size of 33.7 GB. The zst compression algorithm used is estimated to compress the file size by around 7 times, leading to a total file size of 210 GB. While my computer does theoretically have enough space, I am not about to purge the accumulation of wonderful videos and useful applications. Fortunately, this storage space is remarkably cheap and easy to get nowadays from simply a usb stick.
The other technical limitation that this size of data provides relates to the working memory of the computer. To process data, most computer programs look at every single field, and anything that is relevant is temporarily saved and remembered. This capacity to remember the results requires a large enough memory capacity. As of time of writing, 8GB seems to be the default for average consumer laptops. Thus, the typical process, which presumes an in-memory approach, will not be sufficient.
For example, here is a <em>Very simplified</em> overview and pseudo-code of what the process may look like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">for</span> <span class="n">data_row</span> <span class="n">in</span> <span class="n">dataset</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">for</span> <span class="n">specific_item</span> <span class="n">in</span> <span class="n">data_row</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">if</span> <span class="nf">is.na</span><span class="p">(</span><span class="n">specific_item</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">remove</span><span class="p">(</span><span class="n">data_row</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">if</span> <span class="nf">is.character</span><span class="p">(</span><span class="n">specific_item</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">as.numeric</span><span class="p">(</span><span class="n">specific_item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Note that the object dataset must be defined and able to be evaluated at <em>all times</em>. I.E., held in memory (and not lazily evaluated). The solution? Databases.</p>
<img src="postgres.png" width="10%" height="10%" />
<h4 id="databases">Databases</h4>
<p>For this project, I used <a href="https://www.postgresql.org/">PostgreSQL</a> (also and henceforth known as Postgres), due to its wide application across the industry and extensive documentation. Postgres is a client-server model, which means that it runs on a server, and supports multiple connections at once. This provides the advantage of defining user roles for security, and ease of connection, as there is no fundamentally different process having one or multiple computers talk to the database at the same time. Databases also get their speed from user or system defined indices; keys that tell Postgres where specific data is.</p>
<p>Setting up Postgres was surprisingly not trivial, as there were user permission conflicts along the way, however, once set up, it has been easy to work with.</p>
<h4 id="data-wrangling">Data Wrangling</h4>
<p>Concurrently on setting up the database, I was writing code to break down the database record into something that 1) I could put into the database as a useful format and 2) I could analyse more easily. Below is an example of the format that the data was in before processing:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">[Event</span> <span class="s">&#34;Rated Bullet tournament https://lichess.org/tournament/yc1WW2Ox&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[Site</span> <span class="s">&#34;https://lichess.org/PpwPOZMq&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[Date</span> <span class="s">&#34;2017.04.01&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[Round</span> <span class="s">&#34;-&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[White</span> <span class="s">&#34;Abbot&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[Black</span> <span class="s">&#34;Costello&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[Result</span> <span class="s">&#34;0-1&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[UTCDate</span> <span class="s">&#34;2017.04.01&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[UTCTime</span> <span class="s">&#34;11:32:01&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[WhiteElo</span> <span class="s">&#34;2100&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[BlackElo</span> <span class="s">&#34;2000&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[WhiteRatingDiff</span> <span class="s">&#34;-4&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[BlackRatingDiff</span> <span class="s">&#34;+1&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[WhiteTitle</span> <span class="s">&#34;FM&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[ECO</span> <span class="s">&#34;B30&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[Opening</span> <span class="s">&#34;Sicilian Defense: Old Sicilian&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[TimeControl</span> <span class="s">&#34;300+0&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">[Termination</span> <span class="s">&#34;Time forfeit&#34;</span><span class="n">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span><span class="n">. e4</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.17] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">30</span><span class="n">]</span> <span class="p">}</span> <span class="m">1</span><span class="kc">...</span> <span class="n">c5</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.19] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">30</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">2</span><span class="n">. Nf3</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.25] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">29</span><span class="n">]</span> <span class="p">}</span> <span class="m">2</span><span class="kc">...</span> <span class="n">Nc6</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.33] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">30</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">3</span><span class="n">. Bc4</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -0.13] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">28</span><span class="n">]</span> <span class="p">}</span> <span class="m">3</span><span class="kc">...</span> <span class="n">e6</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -0.04] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">30</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">4</span><span class="n">. c3</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -0.4] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">27</span><span class="n">]</span> <span class="p">}</span> <span class="m">4</span><span class="kc">...</span> <span class="n">b5</span><span class="o">?</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 1.18] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">30</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">5</span><span class="n">. Bb3</span><span class="o">?!</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.21] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">26</span><span class="n">]</span> <span class="p">}</span> <span class="m">5</span><span class="kc">...</span> <span class="n">c4</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.32] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">29</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">6</span><span class="n">. Bc2</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.2] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">25</span><span class="n">]</span> <span class="p">}</span> <span class="m">6</span><span class="kc">...</span> <span class="n">a5</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.6] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">29</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">7</span><span class="n">. d4</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.29] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">23</span><span class="n">]</span> <span class="p">}</span> <span class="m">7</span><span class="kc">...</span> <span class="n">cxd3</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.6] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">27</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">8</span><span class="n">. Qxd3</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.12] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">22</span><span class="n">]</span> <span class="p">}</span> <span class="m">8</span><span class="kc">...</span> <span class="n">Nf6</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.52] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">26</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">9</span><span class="n">. e5</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.39] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">21</span><span class="n">]</span> <span class="p">}</span> <span class="m">9</span><span class="kc">...</span> <span class="n">Nd5</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval 0.45] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">25</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">10</span><span class="n">. Bg5</span><span class="o">?!</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -0.44] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">18</span><span class="n">]</span> <span class="p">}</span> <span class="m">10</span><span class="kc">...</span> <span class="n">Qc7</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -0.12] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">23</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">11</span><span class="n">. Nbd2</span><span class="o">??</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -3.15] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">14</span><span class="n">]</span> <span class="p">}</span> <span class="m">11</span><span class="kc">...</span> <span class="n">h6</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -2.99] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">23</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">12</span><span class="n">. Bh4</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -3.0] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">11</span><span class="n">]</span> <span class="p">}</span> <span class="m">12</span><span class="kc">...</span> <span class="n">Ba6</span><span class="o">?</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -0.12] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">23</span><span class="n">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="m">13</span><span class="n">. b3</span><span class="o">??</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -4.14] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">02</span><span class="n">]</span> <span class="p">}</span> <span class="m">13</span><span class="kc">...</span> <span class="n">Nf4</span><span class="o">?</span> <span class="p">{</span> <span class="n">[</span><span class="o">%eval -2.73] [%</span><span class="n">clk</span> <span class="m">0</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">21</span><span class="n">]</span> <span class="p">}</span> <span class="m">0-1</span>
</span></span></code></pre></div><p>This is already a very useful format. Data that I did not extract includes the date, time, round, and any title information. I did not have any questions that I wanted answers to that included the first three fields, and I feel that the granularity of the Rating field encompasses any differences between titled and non-titled players.
Due to the zst decompression algorithm I used, the game was lumped together, rather than including line breaks. This helped, as I was easily able to ensure all of my game data was in the correct order, however, means that I was splitting based on &lsquo;}&rsquo;, and then checking how many periods preceded, to know who the move belonged to. My parser is fairly robust, and I tried to throw away as little data as possible, despite a clear surplus. For example, hxg8=N!!# could be a valid move, despite being very much so an edge-case. The script also has a debug mode that allows me to print out specific game or line numbers; useful for validation, and fixing edge-cases that arise. Anything that my script fails at parsing gets thrown into a log.txt file, which includes such games as:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="m">1</span><span class="n">. e4</span> <span class="m">1-0</span>
</span></span></code></pre></div><p>or</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">something</span> <span class="n">else</span> <span class="n">here.</span>
</span></span></code></pre></div><p>Ommitted games include in-progress games or games that do not have clock data (due to a mistake).</p>
<h4 id="data-analysis">Data Analysis</h4>
<p>One of the main reasons that I embarked upon this project was that I knew that I could use normal R syntax to query and transform the database data, through the <a href="https://dbplyr.tidyverse.org/">dbplyr</a> package. The alternative approach is to code in SQL, which while it functions well, does not provide the same level of fluency in manipulation. Additionally, to explore further, or to plot the results, conversion into an R dataframe would be required, slowing down fluency due to context switching.</p>
<p><font size = "4"> <strong>However, I have a problem.</strong> </font></p>
<p>The dbplyr package has interpreted the integer array datatype, or rather any array datatype, as just a string. So, instead of being able to select indices, and determine the length of the array, I am left with a string that looks like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="s">&#34;{180, 166, 165, 130, 124, 121, 88, 84, 59, 51, 23, 18, 5, 0}&#34;</span>
</span></span></code></pre></div><p>I can extract out characters 2 through 4, to grab 180, but would need to remove the curly braces and split along the commas in order to convert this into a useable format. Not only is this extra work in conversion, this process only makes sense for in-memory operations. Challenge 1 bites us again!</p>
<p>This is where the project currently lies.
As preliminary results, here are some very basic plots of the data that I can analyze:</p>
<img src="white_elo_distribution.png" width="10%" height="10%" />
<p>We see the biggest peak at 1500. This is a default rating that lichess provides. Additionally, we see a peak at around 1350. My hypothesis is that most players lose their first game, and play the second game having lost around 150 points. Note that this plot shows the doesn&rsquo;t show the players ratings, but rather a weighted average of players ratings. It seems probable that those who are better at chess (even though there are fewer of them) play more games. This graph then is a convolution of two different underlying distributions, which explains why the mean is 1619, as shown below.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">meta</span> <span class="o">%&gt;%</span> <span class="n">dlookr</span><span class="o">::</span><span class="nf">describe</span><span class="p">()</span>
</span></span></code></pre></div><p>An excellent package by the way; happens to support database connection objects, and provides a nice summary.
Another interesting graph is the amount of games played per time control (excluding delay). So, note that a 3 minute game + 2 second increment per move is lumped in the same category as 3+0. This will be investigated more in the future.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">meta</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">    <span class="nf">filter</span><span class="p">(</span><span class="n">time_control</span> <span class="o">&lt;</span> <span class="m">1500</span><span class="p">)</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">white_elo</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">    <span class="nf">geom_histogram</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="m">100</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">    <span class="nf">theme_bw</span><span class="p">()</span>
</span></span></code></pre></div><p>However, the lack of a full analysis is disappointing. There are a few options.</p>
<p>Options:</p>
<ol>
<li>Use SQL to process, select, and download data for further analysis and visualization in R</li>
<li>Use an ORM (Object Relation Manager) like SQAlchemy to convert python queries into SQL syntax (this is what dbplyr does under the hood).</li>
<li>Modify the input python file to create a newly formatted database to remove the array type.</li>
</ol>
<p>I&rsquo;ve touched on option 1 before, but I would have to really get comfortable with SQL to achieve the queries that I would need to do.
Option two has the same potential of problems that I ran into with the array type here in R. Additionally, it looks like it has its own syntax to learn. It does look easier, however, not easy enough to jump right in with it.
Option three is the best of the bunch as it will enable me to stay in R for analysis, and gives me the option to create more fields if I want.</p>
<p>So on that note I leave you all.</p>
<p><em>Below is an analysis of chess data</em></p>
<br>
<br>
<p>Here is a shiny app:</p>
<p>#```{r}
#knitr::include_app(&ldquo;<a href="https://mkw-tl.shinyapps.io/shiny/%22">https://mkw-tl.shinyapps.io/shiny/&quot;</a>,</p>
<h1 id="height--600px">height = &ldquo;600px&rdquo;)</h1>
<p>#```</p>
<h2 id="r-markdown">R Markdown</h2>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com">http://rmarkdown.rstudio.com</a>.</p>
<p>You can embed an R code chunk like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">summary</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">##      speed           dist       </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  Min.   : 4.0   Min.   :  2.00  </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  1st Qu.:12.0   1st Qu.: 26.00  </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  Median :15.0   Median : 36.00  </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  Mean   :15.4   Mean   : 42.98  </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  3rd Qu.:19.0   3rd Qu.: 56.00  </span>
</span></span><span class="line"><span class="cl"><span class="c1">##  Max.   :25.0   Max.   :120.00</span>
</span></span><span class="line"><span class="cl"><span class="n">fit</span> <span class="o">&lt;-</span> <span class="nf">lm</span><span class="p">(</span><span class="n">dist</span> <span class="o">~</span> <span class="n">speed</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">cars</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">fit</span>
</span></span><span class="line"><span class="cl"><span class="c1">## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## Call:</span>
</span></span><span class="line"><span class="cl"><span class="c1">## lm(formula = dist ~ speed, data = cars)</span>
</span></span><span class="line"><span class="cl"><span class="c1">## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## Coefficients:</span>
</span></span><span class="line"><span class="cl"><span class="c1">## (Intercept)        speed  </span>
</span></span><span class="line"><span class="cl"><span class="c1">##     -17.579        3.932</span>
</span></span></code></pre></div><h2 id="including-plots">Including Plots</h2>
<p>You can also embed plots. See Figure <a href="#fig:pie">1</a> for example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">par</span><span class="p">(</span><span class="n">mar</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nf">pie</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nf">c</span><span class="p">(</span><span class="m">280</span><span class="p">,</span> <span class="m">60</span><span class="p">,</span> <span class="m">20</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="nf">c</span><span class="p">(</span><span class="s">&#39;Sky&#39;</span><span class="p">,</span> <span class="s">&#39;Sunny side of pyramid&#39;</span><span class="p">,</span> <span class="s">&#39;Shady side of pyramid&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="n">col</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;#0292D8&#39;</span><span class="p">,</span> <span class="s">&#39;#F7EA39&#39;</span><span class="p">,</span> <span class="s">&#39;#C4B632&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="n">init.angle</span> <span class="o">=</span> <span class="m">-50</span><span class="p">,</span> <span class="n">border</span> <span class="o">=</span> <span class="kc">NA</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><div class="figure">
<img src="/english/_index_files/figure-html/pie-1.png" alt="A fancy pie chart." width="672" />
<p class="caption"><span id="fig:pie"></span>Figure 1: A fancy pie chart.</p>
</div>

    </div>

    
  </div>

  

  
  
  <div class="pagination">
    

  </div>

      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Joe Harrison
        2023
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha384-t5CR&#43;zwDAROtph0PXGte6ia8heboACF9R5l/DiY&#43;WZ3P2lxNgvJkQk5n7GPvLMYw" crossorigin="anonymous" /><script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8&#43;w2LAIftJEULZABrF9PPFv&#43;tVkH" crossorigin="anonymous"></script><script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js"
      integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB&#43;w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"
    ></script></body>
</html>
